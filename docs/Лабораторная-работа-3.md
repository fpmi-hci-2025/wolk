---
layout: page
title: Лабораторная работа 3
---

# Лабораторная работа 3

---
 
## Оглавление
- [Лабораторная работа 3](#лабораторная-работа-3)
  - [Оглавление](#оглавление)
  - [Задание 1. Разработка спецификации системы с использованием PlanUML](#задание-1-разработка-спецификации-системы-с-использованием-planuml)
    - [диаграммы вариантов использования](#диаграммы-вариантов-использования)
    - [Сценарии вариантов использования](#сценарии-вариантов-использования)
    - [Диаграммы деятельности (2-3) на языке PlantUML](#диаграммы-деятельности-2-3-на-языке-plantuml)
      - [Диаграмма 1: Процесс оценки устной речи пользователя](#диаграмма-1-процесс-оценки-устной-речи-пользователя)
      - [Диаграмма 2: Процесс работы со статьей и анализа лексики](#диаграмма-2-процесс-работы-со-статьей-и-анализа-лексики)
      - [Диаграмма 3: Процесс регистрации и первого входа](#диаграмма-3-процесс-регистрации-и-первого-входа)
    - [Диаграммы классов и объектов (не менее 5) на языке PlantUML,](#диаграммы-классов-и-объектов-не-менее-5-на-языке-plantuml)
      - [1. Диаграмма классов: Основная доменная модель](#1-диаграмма-классов-основная-доменная-модель)
      - [2.Диаграмма классов: Система геймификации](#2диаграмма-классов-система-геймификации)
      - [Диаграмма классов: Модуль аудирования](#диаграмма-классов-модуль-аудирования)
      - [Диаграмма классов: Модуль AI-чата](#диаграмма-классов-модуль-ai-чата)
    - [Диаграммы последовательности на языке PlantUML,](#диаграммы-последовательности-на-языке-plantuml)
      - [1. Диаграмма последовательности: Получение отчета после устного ответа](#1-диаграмма-последовательности-получение-отчета-после-устного-ответа)
      - [2. Диаграмма последовательности: Регистрация нового пользователя](#2-диаграмма-последовательности-регистрация-нового-пользователя)
      - [Диаграмма последовательности: Взаимодействие с AI-чатом](#диаграмма-последовательности-взаимодействие-с-ai-чатом)
      - [Диаграмма последовательности: Добавление слова в личный словарь](#диаграмма-последовательности-добавление-слова-в-личный-словарь)
    - [Диаграммы компонентов на языке PlantUML](#диаграммы-компонентов-на-языке-plantuml)
    - [Диаграмма пакетов](#диаграмма-пакетов)
    - [Диаграмма развертывания](#диаграмма-развертывания)
    - [схема/ы базы данных, используя диаграммы «сущность-связь» (Entity RelationShip Diagram — ERD)](#схемаы-базы-данных-используя-диаграммы-сущность-связь-entity-relationship-diagram--erd)
  - [Задание 2. Проектирование системы на основе метода EventStorming](#задание-2-проектирование-системы-на-основе-метода-eventstorming)
    - [1) Big Picture — общая концепция (акторы, основные потоки)](#1-big-picture--общая-концепция-акторы-основные-потоки)
    - [2) Process Modeling — детальный бизнес-процесс (шаги, ветвления, ошибки)](#2-process-modeling--детальный-бизнес-процесс-шаги-ветвления-ошибки)
    - [3) Software Design — архитектура (модули, инфраструктура, интеграции, очереди)](#3-software-design--архитектура-модули-инфраструктура-интеграции-очереди)
  - [Задание 3. Проектирование системы с применением метода Event Modeling](#задание-3-проектирование-системы-с-применением-метода-event-modeling)
    - [Sign In](#sign-in)
    - [Выбор темы для аудио ответов](#выбор-темы-для-аудио-ответов)
    - [Запись и загрузка аудио-ответов](#запись-и-загрузка-аудио-ответов)
    - [Общение с AI чатом](#общение-с-ai-чатом)
    - [Чтение статьи](#чтение-статьи)
    - [Пройти тест по грамматике](#пройти-тест-по-грамматике)
    - [Пройти тест по грамматике расширенная](#пройти-тест-по-грамматике-расширенная)
    - [Повторение слов по карточкам](#повторение-слов-по-карточкам)
    - [Прослушивание подкастов](#прослушивание-подкастов)
    - [Прослушивание подкастов расширенная](#прослушивание-подкастов-расширенная)
  - [Задание 4. Описание архитектуры системы с использованием подхода C4 Model](#задание-4-описание-архитектуры-системы-с-использованием-подхода-c4-model)
    - [1) System Context](#1-system-context)
    - [2) Container diagram](#2-container-diagram)
    - [3) Component diagram](#3-component-diagram)
    - [4) Deployment diagram](#4-deployment-diagram)
    - [5) Dynamic diagram](#5-dynamic-diagram)

---

## Задание 1. Разработка спецификации системы с использованием PlanUML

### диаграммы вариантов использования

![alt](https://plantuml-server.kkeisuke.dev/svg/TLJBRjD05DtxAwwwWaMGsj8kK1GLLImgTGNg6Xd7f9QCNTcE10AaF523HDGWLknAMR512WIhpliNPlw8SySUEwEc6sVkdNFEVKwEuiIEalORtxAT98n8N8kLcCkXkCNlNp6MFP6oJNPCPx4RQTYDxCc--8VBfUpnvOkatNI3fBmNQv7AIv69iPYBJ7OBr8NhUBRlnINmbvWL4PS0pnJ8EGz3_rNuph8u9DK_r6gb_eQdqjfmLbpVVPrG4bBajSuJQdgHwoHU65WM7-oWvRkqWpnLRgXZ8SOaLaWP9I6dZ53-7Dch6e4Q4Oobc70vOYgxZ14BaYDnAx-e8XOxzDwoYDgnwzWngt-3Tmfr5YDGobYolyELdeOjBp0Orx9JScHVmPUGdnBps5Iyi-FTkopeB_3juPpYEwGYt0gEJ5uHPx5MyXC5wSfk8RPdYFr0dNzOYASF6UYk-3ClDgB31HJCVOFvKzrnipfwU-GGSKQWqzEJcXoeXLgLzCCjLGn0hqBhexmgA2-VktPpQ_5pzEjpGSGFRsU6p1-8h_bP9wKMBNsezKwnG6vWpkstc45mpQtZIMoMGwh50svneV3Oe7xFYUOROje4hPbYGfdyn8iEzoMFfH0vC1Eu0OZdjhWtE74KKeD4ntGn9u7ZuvsWIHTXb9XjKadry_vkaS9yKrKs9vTgmMTlqPocreEWUcfuQ7frjPslP6Nj6TQ-OHqQbfxeXgUQIVN8yojkTl5Na3iEsA4VVULYlUDTUjIusnLwGlMwbxiQ3OqrAos8d9c2k-fIeU-1vYcRu8-MTOGJ_bt_0m00.svg)

### Сценарии вариантов использования

### Диаграммы деятельности (2-3) на языке PlantUML

#### Диаграмма 1: Процесс оценки устной речи пользователя

![alt](https://plantuml-server.kkeisuke.dev/svg/VL9BJiCm4Dtx55x2WWiqco841u0JLAAWYjAY4lPD8kYY5UK452GEuAQOXBPnhZ2-4M_6V2eLsCJnc_VUV3pDwxWrY6ykkohknDssffaValDtP7tY4nr-gQ8bbTfdm59S7BrhqAmV0QKQzvMVK84p9mE6nNsgb5Yh1ir-9KmqvNvCSofXPM2MQeciVHP1z0my2G0PJGkfme8Aki-43ZD7jTIR-77qNwO26Mfn77CWo0ryNgaajmU753XGTdd4fPQYSlHjDeWQDHZj4oc4-SD8dVK75qhh1Zs1byWq2gP9dWeg-pEhdVsJuzr8s0_2MI5UXBwNqgu9AMWX-TVSFD0IqMnRXqDq76VtWyCZjkUATEkyrUbjAyJSXidADvV1LZB3D8mgnqEFGl5-6gbsxrHBamrw0Ms8clZ9t4Q305802m7bvCr9uMAvfw-XEffBMs-IKuGRhByswJwiW_Et8gw-nJnMAl0sqB11CCdrv-PmgIML4VQmVwMKQg8HBFe7.svg)

#### Диаграмма 2: Процесс работы со статьей и анализа лексики

![alt](https://plantuml-server.kkeisuke.dev/svg/TLFBJi9G4DtVhvYmab-0XVoAYH19y16jUrg2ca3G61DNI5YvBGs5Attm2pD_v9bR2g5eGWjpxvavPyuChGVlujvxlEuPh-lrsiGpwNCkJnoBBpuX27c1Wq1693xdU4d08U8nn_n3R0c834_2bjSS4dx4l07MyeQjCOx0D7Z6EIV8MkCxqWg08IRUWgkFPuYB9Li9YAE2U8qO8AhnV4zgQqqKUvSHP5c7Yf5nK2KJKY4gTWk03n6XPdnhvH8T51AF4jasZUbsw8odCk0L4DbHQvN6pklaNRLl05zoM3T43Pu2ki9jkgC1B4DFMoGDqCFRlxNGakRFLQ_JbggFEIzszgk-aPfMKL-aVU6WnAvAQftOyyuQ5PB8H6EEK2Z5q42T58DmeVl8a6IWuyTn9gzweGpEam-b03XI6p6rVNxkfhMl9dqPdrYZAaydTYW0ygpYNQtAw3mgN2hpT1zbw2fcEgv2YpgCLjNvz4WOnrgYVNFPxPZYZRNuT0nOG7afXHrMVl3NoZUnqRTtnhHG0_-RNm00.svg)

#### Диаграмма 3: Процесс регистрации и первого входа

![alt](https://plantuml-server.kkeisuke.dev/svg/RPBTIiD048NlzocMNbdG5sX0-oe50mPQBMt4stIbUj58H0IlfFW6CMtQD6tYAyoyaMTserOjv69_lZbpJcQxux0t2gy7VHK6OT_NDEU8QhwZd2SyqTZajA026uDrYek22YtV1v28CgfnNslAU8hbabAbhAJgq2iECfxHHk2QjXpJMeuWOo2BlKOhGoL7e70CHGCMiWLjGQv0LLZd7jIUmBp3ITHmBNg1q6z_Sjiqu1XdISjJ8t_ezqAbDIIitIKme_r1B-WV8mdjE6a2fROSlZoBpmM6lymcNKauvr0M5LKmb3lopJc0bnsbBa7joZXn9IMIHjPj2Qx2JXp7Urey_VAgRou2ZEA8dd_w_5FWcPYsAJGW06kXEM5prjR16EMLj6wharFRnLDAZDRWleEaK2qH-nQ5s6OQVpW5aF_nrQ57JDAWU6U7L_2zF13K5Y9Yh-pKrf1oGpmuy4IavBUMqcP_w0iC748sx4RpWpmASN3WEOZAEBmQAjNrBy_nT3y1.svg)

### Диаграммы классов и объектов (не менее 5) на языке PlantUML,

#### 1. Диаграмма классов: Основная доменная модель

![alt](https://plantuml-server.kkeisuke.dev/svg/VLHHRXCn4FtVKupobGAfu7TLHOr0I9LQ8MXo07Tt4XditM1x0n52QeFuGyeDE4C5BKHg25UmRyJOJZUk2lpOdl6yzsPcntke3LEcaI8pt0W4-zLTs5zsOx_HUkcMOA_8MDjhChUEDJcko77ZlcHP8PZMCDAeu4C6q6leT5JcC1eTFVDsnIJcS6eKhoRUHicuI1mFW_uGjJb5hNbTTKqzvKKEGx_jqRwxoZxUwYNEAAkZaIgNp93oa4kAPNBgjLXP3Yhz3bMNXIs7GLFoElhsVCG4pNDUCV4ATIDCTwiVhKJUvnQ5GxR_AxZaup4l23vllItFouR8snhURgsKpU1xSn-NP1sXiPmKo7p8IAMjxXb5SONYqxzGxigCZ2gSKyPwXee9yHJ7wXXdU8TvefYKJ9rmQlKRr3aSq-dWnTbhB4pV1ypgWfqrWgdvWBexrvnYJjZq858ysbBret9HIuaLVJzgXavJ3MFMUTA1NWywZ_Vt7tJkJ48EzhSxjnltEKpeoYsozFeMI5lyW1I_QQVzqeyt-EKUg0we89TsFWS2XwT0eZ_-8TUFUhlkakZty9eyQkNEtISw4J9arAOOnDhnY4hkmYr8ZtJ0hkpFBCqbgIr5BQcm6rf9WT1BN--2NDU1Q1shpGwfr_G3-0C0.svg)

#### 2.Диаграмма классов: Система геймификации

![alt](https://plantuml-server.kkeisuke.dev/svg/VL7DIWCn4BxdAOQz-CSMlHQH2deeUDDzWB0xrC1kMfBKYtYeY1SFzG6y-0PBjPZQTfzXyaRELjIWu2dVV3Fv9j-NddNIk75L2gTSYK3FvCCatDASLbG3lJ1OCFJXZZozKntk-VH2vAMq5ZAB1gu5G3fcr2-wa6Nz4wxt1kYEyqk5LrYXTdPxfmjdohh3zaRKE18tNreH-oafVuX8ETMomYwSEwFqeAqBjBbH8wU6EgPLFjIPARyfthC5zCZc9jHiNDHiqzECrk615i3cbann6-YLbc4AF3WBKteZ3_H4Qseu3K_pb2URD69MKHX_J1JIuQaq6jd1XQgGywv6xMCsqIK72QGf9FkTpcxoMq34OlzFYXxgWd_n0m00.svg)

#### Диаграмма классов: Модуль аудирования

![alt](https://plantuml-server.kkeisuke.dev/svg/XLF1IWCn4BtdAuPUj4f5htjI5A7WGN3x0MkRbc1sjsIpe8ZGrfCWzWUy-0T5hQqMwozC_iX9MdVJAdZ9phoTUNcJb-ndEb8wZoNJGaiE-8XpV3MtE3FtW2CANd5gUWG-umW_AHuorfHHba4Zumgk6K0jfwZU2g3Hg1zHlYr5fdaIfg6AcXURsgu17EGjiK2gxEQ7emGNJAxMewevLG6SQIMIZWLQejqMpLpggnKqLv4MQHA0IBG58ajyB2HlAEaLRdUufksIhAb4LszM0oYpKbM95QgMkI-jdKiPyajTqF_HVo8Ilk2G5AqCvdTIxdm8HSoB4NZIAdFYtW1ymcSpn8cvDG_c3gVu3lY1CxAfR_f0JitC471k1gPFw1ZVgAIm3V3B-VX2wzWsuCWpqXbngjAEueGunTrbvgiMsM4QToNNdC3pD9KyIjnqKKQpMjUF8asIhN2QAEvQuUwYLFOgKAj1PNTdPwloUqlctOJ_IjThjsmnVJtR0g3vw2BJf3rx36R0lBzbazjXpQv5BvtGW1Ye4-WK9upjan_qJhu1.svg)

#### Диаграмма классов: Модуль AI-чата

![alt](https://plantuml-server.kkeisuke.dev/svg/bPBFIiD04CRl-nH3JsqbnLw3YAqA1XIXQSuIcw46cjsGdO95FBGzUF4HV8XI50j2ds7pHkwVj4szUSdiRFBDzzlzSY4fBcYQJHYbD45G7sghFikb-YdVeHTuvPjQbGkrOWpvD8CGUOB5S9OZl320ABmUwD8B7lhtG_RAs6WIImcHnCA-zwPw5IG-H55mfViJwtRv55EpvOEf8KgP2dxGzeA-82T-55JJUZaMKl3OXv2Ab8_Dk35oB6B20SfSS8dDaU24p-J3RIhfx4uFZyTuhhsgvS6dPkxSf6lgZfPsc6ReWtdgDilDFeay7TKvuYIf39gPgtl7bkEa6mqaYfavzn7RWQZQSJJLc3gDEzZUrACTqXywQJFoQraP3vj9ezi0puF6QQVJRXnTWG_bqcOzrsclTVvVvGBKchau_g-hVsFKRIFlMldkd5ewLrihtAgDaMtKDsCN6bl_Zxy0.svg)

### Диаграммы последовательности на языке PlantUML,

#### 1. Диаграмма последовательности: Получение отчета после устного ответа

![alt](https://plantuml-server.kkeisuke.dev/svg/ZLJBJjj05DtxAwvO9L8Z44iM28ZQBhe00Vs0KV32QcgYs2rgLmGGRKKHeXia5Y3-m0sO68BDBzpvevux7hzI5YY9FOzxppttp9ci1A4QXby-zvtG2_ikyJLdFDM7-WV7d7B2CN6c3sIg3pWYViPqn5Ei8sY4jHG9jvoPC1xdOOwZUk7ki43xpHEynnnXBvOvgO0-1kxG6Q2ur_C6oWzfZY-1cqXT51pn8t9G_LdlOt6AoNr1QKxokttFzSCPX7DzYZm9k-i08aQkKDgdrllTjabRKxrFhh_Jp5lTsgp24pqoaLYSGR-f8eWZ58aCuGb7UOAl-j--eolftlkgGZTlKXxKMRQCbuWla6XewPyOGJ4I34WBO8W3dGxv3i1Pfo5gYMfRT_AtGDkkbcXZVMkRvjN0crT-iESE0sfLSFe8LHvusgwW2ZaSEn0mD6v9YlQPD8jM2UC88i40O9kQ5Y9h4Mp5i4XIuOfu-56dJex_cDonGVfbMyzXeKIYZwISXKtr2J-GCSoZ-CpPSHlW3S9M-9TOry-f1eUTLlVjkyqtnBV2W9_m4Nycy4zK4wWyr6BmkfPYda1rM5rAmSudCuPfj5FwfkofvfR5XGLQ_u1ZJ01bhXggYJRLlMpNqSeJhTmX1WJLAmFmrxHxNr35VJ4BAK6n_uaRPHB2r-p9dNpAxnTsZy7fJFRhzQqvQolc4ZWh88N_cNy0.svg)

#### 2. Диаграмма последовательности: Регистрация нового пользователя

![alt](https://plantuml-server.kkeisuke.dev/svg/VPFFJjj04CRlVeeH9v28Q3boG2WDXvvQDVICbcHLMGeGsGld9WW4QW312m0FW1IIM0a9fgym-qRzPXoQBJGSRE-kvyzllfdTI9r9tC5k8tAnQrZYMywupoFVyct_axl-1EjBufoVkOUdpy_4lx6O-0uFzR3hs_2P-CieCZMtdn3V_FT_XqnAtrERH4saZ6jnq-mvMk1x7aicpWcVDybvjA1-dxU_sHznwjwuN_bp7iClvq79jpY3Oq_UwbQroI4ywiQP7PDQCKUc8NU91vAIS__B7wjffQpyyQ5nji2K5vNMmznhnDUgmm2KRRAx9cui4oYVHAIHIDC5W9OVH0lWes0ZmGl2DVhwfRf5AwOPhoGlVnTdZ9pDLNrfbcTQRLHy9Ngb3E8R9L9HXDftbWaA7_apd41fxlaZhDh44rIW9Sr2GfLAcKe1wAOO883AyA1IGFoeRaEVrmXti1jAEP9-EaqWk23f1IgJbdVc3zOxE7E73U5R29ZvKqadm5E4-R2lUxtwuIDzIYpCwhHOFQZLR9ekXSulWl_JKucI_aKR5_EcTIi3H1Fb0JMIhc8xGpsM4vsYJEz2BkBevUWLdHFfCBjzj4hEP38UIIv0SOD2jd3emcEPx6Z3xjLnwVy0.svg)

#### Диаграмма последовательности: Взаимодействие с AI-чатом

![alt](https://plantuml-server.kkeisuke.dev/svg/TLFBJi9G4DtVhvYuWWM1k6HX8Aw8CPWWQzF0ZJRXbRQobcfYJ3H4tRZINoX8fV8elp3tZvovRMa5tVGndJddp3ct5TinBEUwsn6EwNGau0lEqSC0LnZY37tyLYFbufGgFgWHL6i5TOyUbK9S2M6qdBu5-45lI_L8eo6rybUVty6meMbBImo8msoP0wFdm06-uPexr8swYmWWXlGEUEBuod2QjPsPP_M42-fUuwoWHZnCH7JL4mrf3NTPIEXs1vAY-wgrYzD-MtQqRdDeE3AInnSe7CNCPJPXgaS3vG86W269sn2bH_Mb6XEnIsPGIuWJzQ1baJyfQho2YEuC7KaimrczSGv5Os0MM_Ijs9MsRLnAo6dB5kpr7h0QvrFaU5KHtHavMQhCCR0lFWdt_f48kFapgh5USq6rTKO9Eq1GIof_efUAsFgOF40XioA-QZQM4b36jreAmxEdSvooZwGeagYjvIHTqPRx1DizC-aSbafGFu5SEWg_miOWdyLA74kpuBX9vhi-n1CTwzUU79AR74i_2nT7cwde8oGgijUct-W7.svg)

#### Диаграмма последовательности: Добавление слова в личный словарь

![alt](https://plantuml-server.kkeisuke.dev/svg/RLExJXj15EtdAwvSGM6PK594oD1G1Sdm0PFTALOYjhKxWDA10O44aHM9WYP1A3y0bWsBZPTVkFD7ENVMhCT0ipklUnxtpAndLgTs_yUUiedTCyJNNF03t_E09ppYAUSy8dUCIO6bU-81OPoxSvwwItuEjjoHkr9AHxQJ4jzYRUAk-6csrmCMvgGpsirCgheWJQAagzkMQdm3C9m0mYdEFRlZHTX-JUesayWcdRPEV-vklQl_xNxnsAiTrb4985JYw-jQ9Zq0Owoj_gup8yTXxqcy336OYX5tLb8qlO7aG5jJwfGFrRykaAyH_q7X8rhpWl_8zO0vRrlkUZ1Q6IXgn3dQ9aCGOZVWvT6SRy6V2cSYe7InHjlVMZlKqDsa4LSd6eUTDCve2PYUCKoiM9upp3gXoh-trOIPEoxS6LeccahndmA9x8dh4xz-ccq_SD9Kcqsg1whv7t1UqQeBWHRGEQN4LgZOXEMLn0-jNrtvGXkfmRcObbhxKMIoR3ciVZFvle6I98JyHKgbEqZssNbbkKZYSMNNPoP6nt9N4DHWbhGxaQk5LXG8lteX2_B378DrVv_Kkcd7U6t_0G00.svg)

### Диаграммы компонентов на языке PlantUML

![alt](https://plantuml-server.kkeisuke.dev/svg/bLJBRjD05DtxAuPkI1OkUnPLWn1LfKGDf1AB2Y4dcIOMRbpPavOALIffIui2YbgnGXKI2_OX9DGDZVCBCt_4kMExSKn0Gb7iySmzvxxEdLLVM9vexpY6i8N3cVma0zcNFzGHdhVuzPaSon2BAPuJEP8JrS5gm7Bo2gPZ68RghHpXFP01LXFPLps6nv4wnKO7aB7gg6DYp1l6FT7aEvpjsLNFQWd3sBLghwm6Pqloi_m5Gkq0D6DQCpa5BC11A7_I4GXxI-oDmTYMlL5PS0nChh9lRuly2sRv34PaAozn-jrSRFx4QGl1lGZmd5UDmtHK_vyaAdEXFY81yZ3CH-5I58NoEbkp1D-t3hIlU1sTjjmwkViwSwAw4PJYJssJrsFjaJeHg1CA47lly0uqRw4jcXNkxTarlW1EK93h9chpJUwBlvj31aXMj-PQzYF-bkKS-BR_3z1KL-n45tiaRpIixBdRjiDdgCEvpBzfoKqq953lINW1W-v2EGG5zf9g-CBrejva8IDT6zW7CcIvajrQtq3vuHfBszNWkYMigkKJ-WBOQt8pr2GJrLMdB5TsVT7mUELfCO8-VXJdTvL4eZvaYi8GnaYT8TnSgSXAICU9n5GgljHVIQuGLirnstKulwHPKkUn1jFQIjg-LQWycpjWkJNNRM16AxkSrvgcSCrD_ZeMEeo9_ZupJPF9BvXMacb_nZzGFSIANf25GSDZcYjt4eJivxwDUA4tKtfY3w7kMwtxS_n9Xxe4f3xLoy_1qhgQeyl89tsMqOYHuc3BoojH8oa8P1IgqxZ_yIW_K6VHN4HNnvqKyd_GP4BGMI6BMBRGxuHqaMeoBguiHlEWHOGTfBfvmsZEKUykA35Z-ON8H1eQ7g9y5FQOj4HtI4YCL4yZNNl2GOxPPB0rNxParrZbhJgkzjy0.svg)

### Диаграмма пакетов

![alt](https://plantuml-server.kkeisuke.dev/svg/XLJRJXH147tlhoZtHKY03_31i6fYZ1g8aFX0U1YaXOdBIdO73J4aBAZH018I7mmQ4kCFhB0Z8xix_4Br7tcgkcUOrQZPMsztrUbpgaxDT3k9Mid6MiCaSTAmn1yvuowVkMry3_3g4bzYUS6fs-6SJybrE7CT_4bvuFQCkPQisZLBB-AbLjHCZBbEVCANo4-vXq_V7KeaSOx4eI3mqErnMe45odhqv5cqOgd6nzm7WnH1EqYua3KfN8Q3d7_84GWSrYXgq-r6R9i9lJ94kFOOvmF0veZm07kar-rY2O2g4iZg2JT2BEGgpPxmKsaP01VYcJcghwylolgnNVBhBLFXUkGE10vflSbgMRYhx6uXq3QNbHxUPLvzzXxTZHBxCjhKkB3MEE1N8laho6v30w29koB4AyF6QrJa0djlyPifJdqZMVqlY9Gor-G-e7vgucph-TEuOTkQJ5hBRnhOHLRVLzntB4UXzlbSszXLCbAu0MSJ5EJdsYeWJuXJ-Y5osqVzcvlWUGm-LLxpjft4pPKAhSyuE_F2WnJaUgEfAqOm9gJxUL3S2JivpauBCokVqURyLdArXpZoF3IrtemQc-suMgjFsf7K3utqGtXqg3xt24MXXmyc8JqFmx3lFlnPX1F-xjxZE2LneT2biRdLg6MNwRvjDMrZNAyEM-7Y1VvIe8grUyeLe-NUqDYT-PdnnIBCeqi3rJ_I-4ncemoGkHcg9SuGKMfOLA9RVv_eS_L79iuNXNvo2CiKOzfpkoFpfkqFyperTRCq_Gte5uZIMsvN4ch6514IBTOUsIWiEx8P_69COHnDBHecDmbbDRPx1z9mfjmrqkQQwZtoR3HggCBW935qwGrz5bwLm1qAJgvVljxemrNVPI343DKE69rNeUWRQyenhEnLbOIjKb1bpqpZGOEd-2y0.svg)

### Диаграмма развертывания

![alt](https://plantuml-server.kkeisuke.dev/svg/ZPJDRjD04CVl-nJ3NaYakZrmGHnGGoALg0anSL3FctYJ6DdUoBikgb2ab2A11585uio55mYWY49fU8Nr6p7h3tNRL0LPiiSx__tDXsUzAnLBL1g5H0KgvA0_wJEzrD-p1Tv_uxM4tFoXl-bLjiXUPU_GMkeBVPQTGWsVIz3hx1YDjP70VZhaISmLbtL2xgWfZpWS1iE4nOgGMFWSgFwI7IDeWJj-6WlthK7_mTVpx3r6Cg0bBg_m_PG2a_1CygJ53uCHXvS403CEncoaW0Oz3ngp6Rsog3-ObBCJH67AK3lWGoEgKp8dP1IAr4VDP_rLdwFgZIa1Iy6oBxBN-SOyETp-2vydPWLgV7kolGMD0syBzeIOOAEQXbEdc0_6BkgwB1szgLGyoPFVlo_ph07oMw7TOug_O4VW2f-MNhk4Xjk6Kf8pIZlNpOd5QQHg2XvFyjuWh2RhD_4OoXnPoEWcPS2b-WyALgPkeRY960VOcd-3PeNoEkjQZnen2uza83U0s93AXqitbLjwRqcssu4k6g4DxNPid0sCGYSowisCvvVVlujX9zo75bDio2JFcQr7JuopWFgb1tibf9eat7lQeLSXlU5pZX4z9HA4vOZIjZYoMC6GGTpk5GHhjZ_YJA-oj-QGued4MQg-GJbxrWI36p8r5ab4hRf78fg9cCTc4Br-rVwYxrw_B1tZtGN7SQ0feYYDWn5JWOZ1PMegpJgn3gtZFAn661u0VJmOk1ubn9mC19GjGiUWwUwqNLevxCBHwzqpjK0jtuwdcTX3O4AOP54twRjDs84goYwFVVp1_GK0.svg)

### схема/ы базы данных, используя диаграммы «сущность-связь» (Entity RelationShip Diagram — ERD)

![alt](https://plantuml-server.kkeisuke.dev/svg/ZLRTRjCm5BxtKvZkOZzINW1Dqmeheapxwzg9kyXBN6h8Jx6TZMgTn1X2GapQ3TSWtc2C3Sh-U0NdZJXnkYn9asoj6iK-FZxVEVw-uouAIRWCN0T99XsArLSrKYVgL_WUdbVmFS6ry20y33-hQtK3Rn_28oCyKAVXiVeJ7jNmJAErD8lG8zcZBiKxR9iJJo8qZTKtzGzsELTdyBk4vUVg2cUtKYCy0yyJzLDTgb7uAVmoYwW7G0QurX6KYnhUGnZFuG069hFnOzpfD9Vm_Fpwyi82M0n3cwbBc0F6hNhhwVDw2-oTrUP6fw7NpE4-4MBNvxRP8w9tjqpRF0AeirFSTsXsnkAKI6gRHCBITdEbiTckhwoZVPIWRVjzPYLmPJIgm5iGr6RTBhC2HmvCX-xGL3RfC1i15PBvNXBfxNYYDDXK0PXdo-F29DwIljEfDLwsCrc1sToaGgH3YdXS4N7YjCO1Ax7SRcj3fSkgN0zivfjrJ-ock47qi09E4U04KM414r141-moXve1JpDiMdq78eCMiBh0uKUWy5_W-25MftY5USsrwPW7e0LXSTQNPHMkUyGP22RC5ktxN2P9SJsiIAeWwmWr0FjngqsiRa1x8tLjg0j3luFir5Lu68EpQ9TFS2qolEB4TGatNGQzuGqLvclXUx3cnURQwXEzOiUto7RW43wOj75g-QvBFJZ7Y3K5EKVADhUIBUAKjOmz2JioEv_oEEaKjV8d5Nb72aydebL5kynZ4P0nZ7YQsBPMSndDh1w3ka0IjmUYdUvcgp36wfu44lCWZuHPG3sWLg7QTQ6Am4pM8KAHBiTK5TpqmWHrf3kJ4kvHErUMybuUCmswEDmJv-gtEWC5v2wBOp2Da6xckFmp71g6luSp_UQXJZawtUksxsktT5s1f3CJnOPBBUxgzo98kl937R9veiomt2lJ_L0Ij3fKrWbbXYLUmo7EjoM45a7Hy2_XFm00.svg)

## Задание 2. Проектирование системы на основе метода EventStorming

### 1) Big Picture — общая концепция (акторы, основные потоки)

```mermaid
flowchart TD
  %% Actors
  subgraph Actors
    U["Пользователь<br/>(студент / школьник / профи)"]
    T["Преподаватель / Коуч"]
    B["Заказчик / Бизнес / Админ"]
  end


  %% Clients
  subgraph Client["Клиентская часть"]
    UI["UI: iOS / Web клиент"]
    Recorder["Модуль записи / предпрослушивание"]
    Cache["Offline cache (IndexedDB / local storage)"]
  end


  %% Backend
  subgraph Backend["Серверная часть (backend)"]
    APIGW["API Gateway / Auth (JWT / OAuth)"]
    Upload["Upload Service / Ingest"]
    Storage["Object Storage (S3-compatible) — аудио"]
    MQ["Job Queue (RabbitMQ / Kafka)"]
    ASR["ASR Adapter (Google STT / локальный)"]
    Analysis["NLP / Analysis Service<br/>(CEFR classifier, Grammar checker, Lexical profiler, Paraphraser)"]
    Report["Report Generator (JSON → PDF / Excel)"]
    DB["Relational DB (Postgres) — результаты, профили"]
    Search["Search / Index (Elasticsearch) — лексика, history"]
    Export["Export Service (PDF/Excel)"]
    TeacherPortal["Teacher Portal / Group Reports"]
    Analytics["Analytics & Metrics (Prometheus / Grafana)"]
  end


  %% External integrations
  subgraph External["Внешние сервисы"]
    ASRProvider["ASR Provider (Google, etc.)"]
    LMS["LMS / SSO / Payment Gateway"]
  end


  %% Flows
  U -->|запуск теста / навигация| UI
  UI -->|нажатие «Записать»| Recorder
  Recorder -->|локально сохраняет при оффлайн| Cache
  Recorder -->|загружает аудио| APIGW
  APIGW --> Upload
  Upload -->|сохраняет аудио| Storage
  Upload -->|создаёт задачу| MQ
  MQ --> ASR
  ASR -->|результат =| Analysis
  Analysis -->|формирует отчёт| Report
  Report --> DB
  Report --> UI
  Report --> TeacherPortal
  DB --> Search
  APIGW -->|аутентификация / профили| DB
  Analysis -->|метрики| Analytics
  ASR -->|может обращаться к| ASRProvider
  TeacherPortal -->|групповые отчёты / экспорт| Export
  Export -->|готовые файлы| UI
  LMS -->|интеграция/авторизация| APIGW
  B -->|мониторинг и данные| Analytics
```

Эта схема показывает главных участников системы (пользователь, преподаватель, бизнес), клиентскую часть и серверную подсистему: загрузка аудио → очередь задач → ASR → аналитика → генерация отчёта → возврат пользователю и сохранение в БД. Включены внешние интеграции (ASR-провайдер, LMS) и подсистема аналитики.

### 2) Process Modeling — детальный бизнес-процесс (шаги, ветвления, ошибки)

```mermaid
flowchart TD
  Start([Старт: пользователь запускает тест]) --> SelectTopic["Выбор темы / режима (Exam / Quick / Professional)"]
  SelectTopic --> GenerateQ["Генерация списка вопросов"]
  GenerateQ --> ShowQ["Показ вопроса пользователю"]
  ShowQ --> Record["Запись ответа (модуль записи)"]
  Record --> Prelisten["Предпрослушивание / Повторить?"]
  Prelisten --> DecisionRepeat{Пользователь\nсогласен повторить?}
  DecisionRepeat -->|Да| Record
  DecisionRepeat -->|Нет| SendUpload
  SendUpload["Отправка/сохранение аудио"] --> OfflineCheck{Есть сеть?}
  OfflineCheck -->|Нет| SaveLocal["Сохранить в кэше и пометить/queue"]
  OfflineCheck -->|Да| UploadAPI["Отправка в API Gateway"]
  SaveLocal -->|При восстановлении связи| UploadAPI


  UploadAPI --> AuthCheck["Auth: проверить токен/пользователя"]
  AuthCheck --> StoreAudio["Сохранить объект (S3) + метаданные в DB"]
  StoreAudio --> Enqueue["Создать задачу обработки в MQ"]
  Enqueue --> ASRProc["ASR: распознавание → текст + таймкоды"]
  ASRProc --> ASRQuality{ASR OK?}
  ASRQuality -->|Нет| ASRFail["Пометить, вернуть код ошибки клиенту → запрос переозвучки"]
  ASRQuality -->|Да| NLP["NLP pipeline: tokenization → grammar check → CEFR classifier → vocab level → fluency metrics"]
  NLP --> Reco["Генератор рекомендаций (перефразирование, примеры)"]
  NLP --> Score["Оценка CEFR + баллы (для геймификации)"]
  Reco --> Aggregate["Агрегация результатов в отчёт (JSON)"]
  Score --> Aggregate
  Aggregate --> SaveResult["Сохранение отчёта в DB, индексирование в Search"]
  SaveResult --> Notify["Уведомление клиента (push/socket/email)"]
  Notify --> ClientView["Клиент: отображение отчёта (CEFR, ошибки, слова, рекомендации)"]
  ClientView -->|Добавить слова в словарь| WordCard["WordCard Service / Personal Vocabulary"]
  ClientView -->|Экспорт| ExportFlow["Запрос экспорта (PDF/Excel)"]
  ExportFlow --> ExportGen["Export Service генерирует файл"] -->|файл| ClientView


  SaveResult -->|обновить профиль/статистику| Progress["Обновление прогресса, бейджи, рейтинг"]
  Progress --> Gamify["Gamification service"]
  Gamify --> ClientView


  %% Error handling & retry
  ASRFail -->|уведомить| ClientView
  ASRFail -->|лог/метрика| Monitoring["Monitoring / Alerts"]


  %% Admin/Teacher flows
  TeacherPortal["Teacher Portal"] -->|запрос групповых отчётов| DB
  TeacherPortal -->|скачать Excel / PDF| ExportGen


  %% Styling (optional)
  classDef sys fill:#f3f4f6,stroke:#333,stroke-width:1px;
  class Backend,ASRProc,NLP,Aggregate,StoreAudio,Enqueue sys;
```

Пошаговый бизнес-процесс от выбора темы до получения отчёта: запись → (локальное сохранение при оффлайн) → загрузка → очередь обработки → ASR → NLP-pipeline (CEFR, грамматика, лексика) → генерация отчёта → уведомление и отображение. Включены ветвления на ошибки ASR, оффлайн-сценарий, сохранение прогресса и экспорт/учительские сценарии.

### 3) Software Design — архитектура (модули, инфраструктура, интеграции, очереди)

```mermaid
graph LR
  %% Клиенты
  subgraph CLIENT["Клиенты"]
    UI["iOS / Web UI"]
    Recorder["Recording Module"]
    Cache["Offline Cache (IndexedDB, localStorage)"]
  end


  %% Пограничные элементы
  CDN["CDN / Static Hosting"]
  APIGW["API Gateway / Load Balancer"]


  %% Сервисы
  subgraph SERVICES["Микросервисы / Backend"]
    Auth["Auth Service<br/>(JWT/OAuth)"]
    UserSvc["User Service / Profile"]
    TestSvc["Test & Question Service"]
    Ingest["Ingest / Upload Service"]
    ASRAdapter["ASR Adapter / Worker"]
    AnalysisSvc["Analysis Service (NLP pipeline)"]
    ReportSvc["Report Generator Service"]
    ExportSvc["Export (PDF / Excel)"]
    TeacherSvc["Teacher / Group Service"]
    Gamify["Gamification Service"]
    Notification["Notification Service (Push / Email / WebSocket)"]
  end


  %% Инфраструктура (постгрес, s3, redis, mq)
  subgraph INFRA["Инфраструктура"]
    Postgres["Postgres (results, profiles, meta)"]
    S3["Object Storage (S3) — аудио/файлы"]
    Redis["Redis — cache, sessions, rate-limit"]
    MQ["Message Broker (RabbitMQ / Kafka) — очереди задач"]
    Elastic["Elasticsearch — поиск/индексация слов и history"]
    Minio["(опционально) локальное S3 (MinIO)"]
    Prometheus["Prometheus / Grafana — метрики/алерты"]
    CI["CI/CD (GitHub Actions / GitLab CI)"]
  end


  %% Внешние
  subgraph EXTERNAL["Внешние сервисы"]
    ASRProvider["ASR Provider (Google STT / Azure)"]
    Payment["Payment Gateway"]
    LMS["LMS / SSO"]
  end


  %% Соединения и потоки данных
  UI --> Recorder
  UI -->|static assets| CDN
  Recorder -->|PUT /multipart| APIGW
  APIGW --> Auth
  APIGW --> Ingest
  Ingest -->|save audio| S3
  Ingest -->|enqueue job| MQ
  MQ --> ASRAdapter
  ASRAdapter -->|call external| ASRProvider
  ASRAdapter --> AnalysisSvc
  AnalysisSvc --> ReportSvc
  ReportSvc --> Postgres
  ReportSvc --> Elastic
  ReportSvc --> ExportSvc
  ExportSvc --> S3
  ReportSvc --> Notification
  Notification --> UI
  UserSvc --> Postgres
  TestSvc --> Postgres
  Gamify --> Postgres
  TeacherSvc --> Postgres
  Redis -->|cache| APIGW
  Redis -->|sessions| Auth
  Prometheus -->|metrics| SERVICES
  CI -->|deploy| SERVICES
  APIGW -->|websocket| Notification
  TeacherSvc --> ExportSvc
  LMS --> Auth
  Payment -->|stripe/psp| APIGW


  %% Group visuals
  subgraph DEPLOY["Deployment / infra"]
    INFRA
    SERVICES
  end
```

Архитектура разбита на клиентскую часть, граничный слой (CDN, API Gateway), набор микросервисов (аутентификация, ingest, ASR-адаптер, analysis, report, export, teacher, gamification), очередь задач и хранилища (S3, Postgres, Redis, Elastic). Внешние интеграции: ASR-провайдер, LMS и платёжная система. CI/CD + метрики вынесены в инфрастуктуру.


## Задание 3. Проектирование системы с применением метода Event Modeling

### Sign In

![alt](https://www.plantuml.com/plantuml/svg/PO_1QiCm44Jl-GeLSd2XjYuz5Ge9f8T0Swa_eAobjRqWhOoqid-_wz92Ia-2cT6-cLCHo59ZE3mGkr0zVYPsQ6QHfRnOcs7h9fAv3hLWTea5MJgNedKp1PAMWrq2y7wYnLNDDYQFWNYo4OZjNwqDD7Iqumv7P1W2dgkaSo0epUEzr2_WDA-Y9ZVAE6Q8sFGqyPLDxp8YwmSj4e5zqzSXafWFdAX81g74vW82-yszGFFFCRtAHfA-USMimPLmQzuJUEMQAtjo84cDE_mDw1V-P8vf70kAUJNFtoqpiiVyjkDkFtCl19D-r1KdDNNs5m00)

### Выбор темы для аудио ответов

![alt](https://www.plantuml.com/plantuml/svg/LOunJyGm38Nt_eeWtL26DZlJdGGZ0oexSXDVQybngiHf_pu9HOXRtsU_zrspGj8Ik7iYSLmyVaLnQ5RLBRzOc-0O5zArp2LZSb4KHKSNWtKhCUaWR3S6QHK3xXKE8NfaaiK68B6FsS0qZzJckWiAp8otel761Bb__XzD6xXwNyFkSb32UuA0_MVSo6KpkOGezRvw113VJyZerFpWLjCspsDp8lGrtWcF_gDWLegIpJscFtg-jh64uZ6zjORtN-bNWgNELvThXKt-6m00)

### Запись и загрузка аудио-ответов

![alt](https://www.plantuml.com/plantuml/svg/LO-_JiGm3CRtFaMGRWX3cvtfAi7801KpSXFJMagSod6khq-YOpX6__BzoNSj2g8rnU69sCSQy3kpHxEh7kN5EO5psaZtkjQ2uZChiau-9-TtYgGZHtT4u1unuWrPnvG3HkBD9I1s_zaOQPsermqNP5WZpbNp70cAVNv4om6-wHiSBYS9_WWaj1yLYrBcOXOlYDmiFgS47Emd-Yp1p3LGDZEN4wK7zdRx2CrTYC4qb_awOePsDEcDyBJtsomAMall5kI0yjPZtlysl19i0gbzxTeU-vPV)

### Общение с AI чатом

![alt](https://www.plantuml.com/plantuml/svg/LOyzJiGm48NxFKMGjWX5ufvg8vQ2OXjo03Hn7ib8zZYo9ucuFHD0OkcizutVpwKePLrZE3sm-B2EU4_YKSsgItboBjFUJgppEgm5sITHYBO-HUTd3goD1BS4aiEYmMQmYMb4O9bS91RtNsi23oqVSQSpX8Q0RjNK1QPIFzvB_KBUxaqydNVE-CWKKNUlrVDCMlK-0s8Vh4Wa6UiUClwW6qgX2SQ-a-jxiUfDgSXEtr2M90NsyE0DezrlZDqI_jYLYqtxF2fayqT-EHnllrEkJ9ELieONWpRf2m00)

### Чтение статьи

![alt](https://www.plantuml.com/plantuml/svg/NP1DJyCm38Rl-nL1sg4SkjuvhO9fue24DC4LkQbPBJbEPJiR-_UaY8cFM_G-J_mwsPg3UacykY69N4Pyon8nJEwptNMTmdbp99_AK0mrPd4KtyISkZWHaxV2tSmWouWMJoZUfZmYanox12JTtwnb6ZQqrAtMA30mziLppmJMtFwE3ZF4wjTmjJwJuhj2mgPNfyWO3b4HfLw8EIMGiTcZXoli1VXYPCkyfRpv3y8U1HKSnwgS2C_DNY4bq72VnLnBTAg7y68_nckEC1G6lOJQ5tOViwBPebsDnv5oiY_wF2aOLbANLvGHTRSiylJz2Gy4HuLKtxQji2J-1000)

### Пройти тест по грамматике

![alt](https://www.plantuml.com/plantuml/svg/PP1FImCn4CNl_HGHUjY2sxru4eIMwa5GXBPtIPFNxj3iP4qctQ_lh2osuZ7lJtx3MsMnIKeNPdV4BXIFpyWEfXNfysFJ93iiJoHjEPICv28BM9OkTerhAP3K79e-M1w_g75Hi-wYHo0-DPqbRlvgTQ33aaRSR0wsXu1raRWEP7Erk9LslNMQLr6J0oKSa-rGxP75x6DFBfkTIm1hIw_fBFjgXm0dvffHxmS_rMm-PxF5Lz4Nl9eNmb2zHUkLP5xPaxCIq-8_S6nEl7ipZyTZXfWdyt03txGnPfWrvm79VFH2aN_vaxffuSvNygHkaKkGM_vidi0UwMKilq_JFPCzwKcwo4hDSS9l)

### Пройти тест по грамматике расширенная

![alt](https://www.plantuml.com/plantuml/svg/RPBFojim4CJlUGeLSd2WZY-bb48X8McXq3yqphqeqYPU8gzSQHMtRzyLdvtF9ZbwTdRc9xoRo3fmQjtY3P9noS9lJmPKmzp5ZrKLTB--83Vfb284uuc1U6ryMva67N99hkgSfXnHmas6PUijEAHBrMgaQgwL3azhp7MB9P0-ETWczbk7EXQhgLHtseXVH77s6E0ST0l54IAhe-_GH5MR042o9JIj9blKuC2mUlNan5m_hEbuZUe0Vv9yWPNX3Q4lldbjfKbz9Oj6im-hnqBP7FlUggK_doEm-gJUJSftZVSHr9PY3q7zx1WztVi7TTU0kTwRH_K0CJcUzO-XF-0lgr_2EqsRgohpvym7wfVSPzmVHeAZP-tKpeS0XWVsE7M-7vrxO8qExFZ0EWbX-FVK-mL9KZE3TFi0SvE01Y0BuND-pFVXCFQeBu8k_tiZmtmW_m40)

### Повторение слов по карточкам

![alt](https://www.plantuml.com/plantuml/svg/RP51YzH048NlyojAs4CMpEJYGGHXHrT1L9IDub5gkckIWavrgAvCyDzRcTMb1pq5tdkyzwNhhXYgBLFQFMC9QOdqCqiW6Ctcyghh5DVzm3OknwMGXYn6OlkGfowCdDXQITsSKBQAbivkjbEEb5Y6RaAMxbfh4n_tlCtjRaZmcEYmM3uanjBSrb8_O_2yYvvSMUcaE57J1oKIM9q8-eqStYSiOq2D1TuiPbcynl4cbDWyq4neqEEP8lp8dd7p0jHK6ZoGARiStJqphSsdZD77uOD43cXPRsk6Ql4HvpdSvDEfaC5hU57DzsDUBnFmJL5AGkCiJmILzW-1R_0yE-3JrkClrpqrKgN_X-bbpKI9Wi57oMkYE11ycQ-elXTIE4XPjq-CZc1vUsdZOXpANxwtYwh7uQlcGQaKkESo9_nrEPSxaVJTrlVvpztl6GSdzNFUkRbCkzy0)

### Прослушивание подкастов

![alt](https://www.plantuml.com/plantuml/svg/LK-zQiCm4Dxz52faS0TRUwU4jcCXuExbB5tjewUJaKunVVjAa8ApVl_VEIiaBO6x9nB7nUDN58TcLTtoYxK9zd4XNSjSCYONHL5qT35OjnAJ3i9sOv0MCU2jaaE87fbaiG58x2CsCCqZjRhkX08puwLel311xf-FqBI1g_eATgUT4dud2DXVetUGDPl99KIfZheaWFZ-ol1h9cHqYjxSTIsnrV_xJ5FDu7xCr5wZhu8RuTw_bfHG3lmd1MpL5VMOtbl8n_t26y5InzHbvqgsAty0)

### Прослушивание подкастов расширенная

![alt](https://www.plantuml.com/plantuml/svg/TP0nJmCn38Nt_ef3OhWEr-nChGfiI1N7Zdo9wLauJkKuhVZt9AAWO-ZwlizvqTjc0xKIUNL7uha4V4_YiPlDJld1EONBvaWsbwbaL9_4K6pZKtH-9YORXDs9GTeJ0vuh768Ao2H75u74_Sy6fcb3hMvrZm8JuwvOsZ51xjVBQ3o1htuDgtaXnG-5YFqX1G_PSZTwHPHwubEC8A4_C7nr8p9wmz1TlSgnzV_UTSsQm7zseu5MiGfdmak_Bwee2_v64TVBvZ-oJsAQE2-xeMIytTbeMEYlc4kyxV_WSFllpoIKvsRKRHGbe3ury-KwyYF1KI7MxROLjh6_0G00)

## Задание 4. Описание архитектуры системы с использованием подхода C4 Model

### 1) System Context

Dнешние акторы - пользователь; 
Внешние системы - ASR и LMS; 
Наша система - UI + backend микросервисы, которые принимают аудио, обрабатывают и возвращают отчёт.



```mermaid
C4Context
title Система оценки владения английским языком — Контекст


Person(user, "Пользователь", "Студент / школьник / специалист — использует мобильное или веб-приложение для тренировки речи, чтения и аудирования")
System_Boundary(system, "Система оценки владения английским") {
  System(webApp, "Web/iOS App", "Пользовательский интерфейс (Flutter / Swift)")
  System(api, "Backend (API Gateway + Микросервисы)", "Принимает запросы, маршрутизирует и orchestrates processing")
  System_Ext(asr, "ASR Provider", "Внешний speech-to-text (Google/Azure/Whisper)")
  System_Ext(lms, "LMS / SSO / Payment", "Интеграции сторонних сервисов")
}


Rel(user, webApp, "Взаимодействует через UI (запись, чтение статей, чат с ИИ)")
Rel(webApp, api, "HTTPS / WebSocket — аутентификация, загрузка аудио, получение отчётов")
Rel(api, asr, "Асинхронные/синхронные вызовы ASR для распознавания")
Rel(api, lms, "SSO / обмен профилями / платежи (опционально)")
```

### 2) Container diagram

Контейнерная диаграмма выделяет отдельные микросервисы и хранилища. Очередь (mq) — ключевой элемент для асинхронного, масштабируемого анализа.


```mermaid
C4Container
    title Контейнерная диаграмма — Backend и клиенты
   
    Person(user, "Пользователь", "Использует приложение для тестов")
   
    Container_Boundary(client_boundary, "Клиентская часть") {
        Container(webApp, "Web App", "Flutter", "Регистрация, тесты, чтение, чат")
        Container(mobileApp, "iOS App", "Swift", "Запись, offline cache, push")
    }
   
    Container_Boundary(gateway_boundary, "API Layer") {
        Container(apiGateway, "API Gateway", "HTTP/gRPC", "Маршрутизация, rate-limit")
        Container(authService, "Auth Service", "Go/Node", "JWT/OAuth, users")
    }
   
    Container_Boundary(core_boundary, "Core Services") {
        Container(ingestService, "Ingest Service", "Go", "Upload аудио, presigned URLs")
        Container(testService, "Test Service", "Go", "Тесты, сессии, вопросы")
        Container(analysisService, "Analysis Service", "Python/Go", "ASR + NLP pipeline")
        Container(reportService, "Report Service", "Go/Python", "Генерация отчётов")
    }
   
    Container_Boundary(support_boundary, "Support Services") {
        Container(gamifyService, "Gamification", "Go", "Баллы, бейджи")
        Container(notificationService, "Notifications", "WebSocket/Push", "Уведомления")
    }
   
    Container_Boundary(data_boundary, "Data Layer") {
        ContainerDb(postgres, "Postgres", "SQL", "Users, sessions, results")
        Container(storage, "S3 Storage", "Object Store", "Аудио файлы")
        Container(mq, "Message Queue", "RabbitMQ", "Async jobs")
        Container(elastic, "Elasticsearch", "Search", "Vocabulary index")
    }
   
    Rel(user, webApp, "Использует")
    Rel(user, mobileApp, "Использует")
   
    Rel(webApp, apiGateway, "HTTPS")
    Rel(mobileApp, apiGateway, "HTTPS")
   
    Rel(apiGateway, authService, "Validate")
    Rel(apiGateway, ingestService, "Upload")
    Rel(apiGateway, testService, "Get tests")
    Rel(apiGateway, reportService, "Get reports")
   
    Rel(ingestService, storage, "Save audio")
    Rel(ingestService, mq, "Publish job")
   
    Rel(mq, analysisService, "Process audio")
   
    Rel(analysisService, postgres, "Write results")
    Rel(analysisService, elastic, "Index data")
    Rel(analysisService, reportService, "Send analysis")
   
    Rel(reportService, storage, "Save reports")
    Rel(reportService, notificationService, "Notify")
   
    Rel(testService, postgres, "Read/Write")
    Rel(gamifyService, postgres, "Update points")
    Rel(authService, postgres, "Users")
```

### 3) Component diagram

логика -  job_worker оркеструет пайплайн: ASR → Transcript → grammar/CEFR/vocab/fluency → recommendations → агрегатор.
```mermaid
C4Component
    title Component diagram — Analysis Service (NLP/ASR pipeline)
   
    Container_Boundary(analysis_service, "Analysis Service") {
        Component(job_worker, "Job Worker", "K8s Pod", "Оркестрация pipeline")
       
        Component(asr_adapter, "ASR Adapter", "Python/Go", "Интерфейс к ASR")
        Component(transcript_store, "Transcript Store", "Cache", "Временные расшифровки")
       
        Component(grammar_checker, "Grammar Checker", "LanguageTool", "Поиск ошибок")
        Component(cefr_classifier, "CEFR Classifier", "Transformer", "Определение уровня")
        Component(vocab_profiler, "Vocab Profiler", "Rules + Maps", "Анализ лексики")
        Component(fluency_estimator, "Fluency Estimator", "Signal Analysis", "Оценка беглости")
       
        Component(recommendation_engine, "Recommendations", "ML", "Генерация советов")
        Component(result_aggregator, "Aggregator", "Python", "Сборка отчёта")
        Component(model_registry, "Model Registry", "MLFlow", "Версии моделей")
    }
   
    ContainerDb_Ext(postgres, "Postgres", "Результаты")
    Container_Ext(elastic, "Elasticsearch", "Индексация")
    System_Ext(asr_provider, "ASR Provider", "Внешний сервис")
   
    Rel(job_worker, asr_adapter, "Запрос ASR")
    Rel(asr_adapter, asr_provider, "gRPC/HTTPS")
    Rel(asr_adapter, transcript_store, "Сохранить")
   
    Rel(job_worker, grammar_checker, "Проверить грамматику")
    Rel(job_worker, cefr_classifier, "Определить уровень")
    Rel(job_worker, vocab_profiler, "Анализ слов")
    Rel(job_worker, fluency_estimator, "Оценить беглость")
   
    Rel(job_worker, recommendation_engine, "Генерировать советы")
    Rel(job_worker, result_aggregator, "Собрать отчёт")
   
    Rel(result_aggregator, postgres, "Сохранить")
    Rel(result_aggregator, elastic, "Индексировать")
   
    Rel(job_worker, model_registry, "Получить модель")
```

### 4) Deployment diagram

```mermaid
C4Deployment
    title Deployment diagram — Kubernetes deployment
   
    Deployment_Node(k8s, "Kubernetes Cluster", "K8s") {
        Deployment_Node(gateway_node, "Gateway", "Deployment") {
            Container(api_gateway, "API Gateway", "nginx/Traefik", "2+ replicas")
        }
       
        Deployment_Node(services_node, "Services", "Deployments") {
            Container(ingest, "Ingest Service", "Go", "Autoscale")
            Container(report, "Report Service", "Go/Python", "2 replicas")
        }
       
        Deployment_Node(workers_node, "Workers", "Deployment HPA") {
            Container(analysis_worker, "Analysis Worker", "Python/Celery", "GPU optional")
        }
       
        Deployment_Node(stateful_node, "Stateful Services", "StatefulSets") {
            ContainerDb(postgres, "Postgres", "PostgreSQL", "Persistent")
            Container(minio, "MinIO", "S3-compatible", "Persistent")
            Container(rabbitmq, "RabbitMQ", "Message Broker", "Persistent")
            Container(elastic, "Elasticsearch", "Search", "Persistent")
        }
       
        Deployment_Node(monitoring_node, "Monitoring", "Deployment") {
            Container(prometheus, "Prometheus", "Metrics", "1 replica")
        }
    }
   
    Deployment_Node(external, "External Services", "Cloud") {
        Container(asr_provider, "ASR Provider", "Cloud API", "External")
    }
   
    Rel(api_gateway, ingest, "Route /api/answers")
    Rel(ingest, minio, "PUT audio")
    Rel(ingest, rabbitmq, "Publish job")
    Rel(rabbitmq, analysis_worker, "Deliver job")
    Rel(analysis_worker, asr_provider, "Call ASR")
    Rel(analysis_worker, postgres, "Store results")
    Rel(report, minio, "Save PDFs")
    Rel(report, postgres, "Read data")
    Rel(prometheus, api_gateway, "Scrape metrics")
    Rel(prometheus, analysis_worker, "Scrape metrics")

```

### 5) Dynamic diagram

```mermaid
C4Dynamic
    title Dynamic diagram — Обработка аудио-ответа пользователя
   
    Person(user, "Пользователь", "Проходит тест")
    Container(mobileApp, "Mobile App", "iOS/Flutter", "Клиент")
    Container(apiGateway, "API Gateway", "HTTP", "Точка входа")
    Container(authService, "Auth Service", "Go", "Аутентификация")
    Container(ingestService, "Ingest Service", "Go", "Загрузка аудио")
    Container(storage, "S3 Storage", "MinIO", "Хранилище")
    Container(mq, "Message Queue", "RabbitMQ", "Очередь")
    Container(analysisWorker, "Analysis Worker", "Python", "Обработка")
    ContainerDb(postgres, "Postgres", "DB", "База данных")
    Container(reportService, "Report Service", "Go", "Генерация отчётов")
    Container(notificationService, "Notifications", "WebSocket", "Уведомления")
   
    Rel(user, mobileApp, "1. Записывает аудио-ответ", "")
    Rel(mobileApp, apiGateway, "2. POST /api/answers", "HTTPS + JWT")
    Rel(apiGateway, authService, "3. Валидация токена", "")
    Rel(authService, apiGateway, "4. Token OK", "")
    Rel(apiGateway, ingestService, "5. Forward запрос", "")
    Rel(ingestService, storage, "6. Генерирует presigned URL", "")
    Rel(ingestService, mobileApp, "7. Возвращает URL", "")
    Rel(mobileApp, storage, "8. Загружает аудио", "PUT")
    Rel(mobileApp, ingestService, "9. Подтверждение загрузки", "")
    Rel(ingestService, postgres, "10. Сохраняет metadata", "")
    Rel(ingestService, mq, "11. Публикует job", "AudioUploaded event")
    Rel(mq, analysisWorker, "12. Доставляет job", "")
    Rel(analysisWorker, storage, "13. Скачивает аудио", "GET")
    Rel(analysisWorker, analysisWorker, "14. ASR + NLP analysis", "")
    Rel(analysisWorker, postgres, "15. Сохраняет результаты", "")
    Rel(analysisWorker, reportService, "16. Запрос генерации отчёта", "")
    Rel(reportService, postgres, "17. Читает данные", "")
    Rel(reportService, storage, "18. Сохраняет PDF/Excel", "")
    Rel(reportService, notificationService, "19. Отчёт готов", "")
    Rel(notificationService, mobileApp, "20. Push уведомление", "")
    Rel(mobileApp, user, "21. Показывает уведомление", "")
```
